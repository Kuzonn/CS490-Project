<!DOCTYPE html> 
<html> 

<head> 
    <title>Login Screen</title> 
</head> 

<body>

<form name="login" id="login-form" accept-charset="utf-8">
    <label for="username">Username: </label> 
    <input type="text" id="username" name="username" placeholder="username" required><br>
    <label for="password">Password: </label> 
    <input type="password" id="password" name="password" placeholder="password" required><br>
</form>
<button id="loginButton">Login</button>

<p id="loginErrorMessage" style="visibility: hidden">Error: Incorrect Credentials</p>

<br>

<script src="frontend/ajaxUtilities.js"></script>
<script>

    var loginButton = document.getElementById("loginButton");
    loginButton.addEventListener("click", onLogin);

    function onLogin() {
        var queryString = createQueryParametersString({
            username: document.getElementById("username").value,
            password: document.getElementById("password").value
        });
        sendPostRequest("middle/login.php", queryString, onLoginResponse);
    }

    function onLoginResponse(data) {
        if (data.target.readyState == 4) {
            var response = JSON.parse(data.target.response);
            if (response.isValid === "true") {
                window.location.replace(response.url);
            } else {
                document.getElementById("loginErrorMessage").style.visibility = "visible";
            }
        }
    }

</script>

</body>
</html>